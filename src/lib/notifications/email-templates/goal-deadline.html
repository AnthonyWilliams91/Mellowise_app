<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Goal Deadline Alert - Mellowise</title>
</head>
<body style="margin: 0; padding: 0; background-color: #f9fafb;">
  <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="background-color: #f9fafb;">
    <tr>
      <td align="center" style="padding: 20px 0;">
        <table class="email-container" role="presentation" cellspacing="0" cellpadding="0" border="0" style="width: 100%; max-width: 600px; margin: 0 auto; background-color: #ffffff; border-radius: 12px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);">

          <!-- Header -->
          <tr>
            <td class="email-header" style="background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%); padding: 32px 24px; text-align: center; border-radius: 12px 12px 0 0;">
              <a href="{{dashboardUrl}}" class="email-logo" style="font-size: 28px; font-weight: 700; color: #ffffff; text-decoration: none; letter-spacing: -0.5px;">
                Mellowise
              </a>
              <div class="email-tagline" style="font-size: 14px; color: #fecaca; margin-top: 8px; font-weight: 500;">
                Goal Deadline Alert
              </div>
            </td>
          </tr>

          <!-- Content -->
          <tr>
            <td class="email-content" style="background-color: #ffffff; padding: 40px 32px;">

              <!-- Urgency Indicator -->
              {{#if urgencyLevel}}
              <div style="text-align: center; margin-bottom: 24px;">
                {{#if (eq urgencyLevel 'critical')}}
                <div style="background: #fef2f2; border: 2px solid #ef4444; border-radius: 8px; padding: 16px; margin-bottom: 16px;">
                  <span style="font-size: 32px; display: block; margin-bottom: 8px;">üö®</span>
                  <span style="color: #dc2626; font-weight: 700; font-size: 18px;">CRITICAL DEADLINE</span>
                </div>
                {{else if (eq urgencyLevel 'high')}}
                <div style="background: #fff7ed; border: 2px solid #f97316; border-radius: 8px; padding: 16px; margin-bottom: 16px;">
                  <span style="font-size: 32px; display: block; margin-bottom: 8px;">‚ö†Ô∏è</span>
                  <span style="color: #ea580c; font-weight: 700; font-size: 18px;">HIGH PRIORITY</span>
                </div>
                {{else}}
                <div style="background: #fefce8; border: 2px solid #eab308; border-radius: 8px; padding: 16px; margin-bottom: 16px;">
                  <span style="font-size: 32px; display: block; margin-bottom: 8px;">‚è∞</span>
                  <span style="color: #ca8a04; font-weight: 700; font-size: 18px;">UPCOMING DEADLINE</span>
                </div>
                {{/if}}
              </div>
              {{/if}}

              <!-- Main Alert -->
              <h1 class="email-title" style="font-size: 24px; font-weight: 700; color: #111827; margin: 0 0 16px 0; line-height: 1.3; text-align: center;">
                {{goalTitle}} Deadline Approaching
              </h1>

              <p class="email-body" style="font-size: 18px; line-height: 1.6; color: #4b5563; margin: 0 0 24px 0; text-align: center; font-weight: 600;">
                {{#if (eq daysRemaining 0)}}
                Your goal deadline is <span style="color: #dc2626; font-weight: 700;">TODAY!</span>
                {{else if (eq daysRemaining 1)}}
                You have <span style="color: #dc2626; font-weight: 700;">1 day</span> remaining
                {{else}}
                You have <span style="color: #dc2626; font-weight: 700;">{{daysRemaining}} days</span> remaining
                {{/if}}
              </p>

              <!-- Progress Overview -->
              <div class="stats-container" style="background: #f8fafc; border-radius: 12px; padding: 24px; margin: 24px 0; border: 1px solid #e2e8f0;">
                <h3 style="margin: 0 0 20px 0; text-align: center; color: #374151; font-size: 18px;">Goal Progress</h3>

                <!-- Progress Bar -->
                <div style="margin: 16px 0 24px 0;">
                  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                    <span style="font-size: 14px; font-weight: 600; color: #374151;">Progress to Target</span>
                    <span style="font-size: 14px; font-weight: 600; color: #4f46e5;">{{progressPercentage}}%</span>
                  </div>
                  <div class="progress-container" style="background: #e5e7eb; height: 12px; border-radius: 6px; overflow: hidden;">
                    <div class="progress-bar" style="
                      background: {{#if (gte progressPercentage 75)}}linear-gradient(90deg, #10b981 0%, #059669 100%){{else if (gte progressPercentage 50)}}linear-gradient(90deg, #f59e0b 0%, #d97706 100%){{else}}linear-gradient(90deg, #ef4444 0%, #dc2626 100%){{/if}};
                      height: 100%;
                      border-radius: 6px;
                      width: {{progressPercentage}}%;
                    "></div>
                  </div>
                </div>

                <!-- Score Comparison -->
                <div style="display: flex; justify-content: space-around; flex-wrap: wrap;">
                  <div class="stat-item" style="text-align: center; margin-bottom: 16px;">
                    <span class="stat-number" style="font-size: 32px; font-weight: 700; color: #4f46e5; display: block;">{{currentScore}}</span>
                    <span class="stat-label" style="font-size: 12px; color: #6b7280; text-transform: uppercase; font-weight: 600; letter-spacing: 0.5px;">Current Score</span>
                  </div>
                  <div style="display: flex; align-items: center; margin: 0 16px;">
                    <span style="font-size: 24px; color: #6b7280;">‚Üí</span>
                  </div>
                  <div class="stat-item" style="text-align: center; margin-bottom: 16px;">
                    <span class="stat-number" style="font-size: 32px; font-weight: 700; color: #10b981; display: block;">{{targetScore}}</span>
                    <span class="stat-label" style="font-size: 12px; color: #6b7280; text-transform: uppercase; font-weight: 600; letter-spacing: 0.5px;">Target Score</span>
                  </div>
                </div>

                <!-- Gap Analysis -->
                {{#if scoreGap}}
                <div style="text-align: center; margin-top: 16px; padding-top: 16px; border-top: 1px solid #e5e7eb;">
                  <p style="margin: 0; color: #6b7280; font-size: 14px;">
                    You need <span style="color: #dc2626; font-weight: 700;">{{scoreGap}} more points</span> to reach your target
                  </p>
                </div>
                {{/if}}
              </div>

              <!-- Action Plan -->
              <div class="alert alert-warning" style="padding: 20px; border-radius: 8px; margin: 24px 0; border-left: 4px solid #f59e0b; background: #fffbeb; color: #92400e;">
                <h3 style="margin: 0 0 12px 0; font-size: 16px; font-weight: 700; color: #92400e;">üìã Recommended Action Plan</h3>

                {{#if (lt daysRemaining 3)}}
                <ul style="margin: 0; padding-left: 20px; color: #92400e;">
                  <li style="margin-bottom: 8px;">Focus on your strongest subject areas for quick wins</li>
                  <li style="margin-bottom: 8px;">Complete at least 3 focused practice sessions daily</li>
                  <li style="margin-bottom: 8px;">Review and reinforce concepts you've already mastered</li>
                  <li style="margin-bottom: 8px;">Take a final practice test to gauge readiness</li>
                </ul>
                {{else if (lt daysRemaining 7)}}
                <ul style="margin: 0; padding-left: 20px; color: #92400e;">
                  <li style="margin-bottom: 8px;">Complete 2-3 full practice sessions daily</li>
                  <li style="margin-bottom: 8px;">Focus 70% on weak areas, 30% on reinforcement</li>
                  <li style="margin-bottom: 8px;">Schedule one practice test every 2-3 days</li>
                  <li style="margin-bottom: 8px;">Review detailed explanations for incorrect answers</li>
                </ul>
                {{else}}
                <ul style="margin: 0; padding-left: 20px; color: #92400e;">
                  <li style="margin-bottom: 8px;">Maintain consistent daily practice schedule</li>
                  <li style="margin-bottom: 8px;">Focus on identified weak areas with targeted practice</li>
                  <li style="margin-bottom: 8px;">Take weekly practice tests to track progress</li>
                  <li style="margin-bottom: 8px;">Build confidence with mixed practice sessions</li>
                </ul>
                {{/if}}
              </div>

              <!-- Motivation Section -->
              <div style="background: #eff6ff; border-radius: 8px; padding: 20px; margin: 24px 0; text-align: center;">
                <h4 style="margin: 0 0 12px 0; color: #1d4ed8; font-size: 16px; font-weight: 600;">üí™ You've Got This!</h4>
                <p style="margin: 0; color: #1e40af; font-size: 14px; line-height: 1.5;">
                  {{#if (gte progressPercentage 75)}}
                  You're so close to your goal! Your consistent effort is paying off. Stay focused and finish strong!
                  {{else if (gte progressPercentage 50)}}
                  You're making solid progress! With dedicated effort, you can absolutely reach your target.
                  {{else}}
                  Every point counts! Use this deadline as motivation to push forward with focused, intensive practice.
                  {{/if}}
                </p>
              </div>

              <!-- Call to Action -->
              <div style="text-align: center; margin: 32px 0;">
                <a href="{{actionUrl}}" class="email-button" style="display: inline-block; padding: 16px 32px; background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%); color: #ffffff; text-decoration: none; font-weight: 600; font-size: 16px; border-radius: 8px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);">
                  üéØ Start Focused Practice
                </a>
              </div>

              <!-- Alternative Actions -->
              <div style="text-align: center; margin: 16px 0;">
                <a href="{{dashboardUrl}}/goals" style="color: #dc2626; text-decoration: none; font-size: 14px; margin: 0 12px; font-weight: 600;">Adjust Goal</a>
                <span style="color: #d1d5db;">|</span>
                <a href="{{dashboardUrl}}/analytics" style="color: #dc2626; text-decoration: none; font-size: 14px; margin: 0 12px; font-weight: 600;">View Analytics</a>
                <span style="color: #d1d5db;">|</span>
                <a href="{{dashboardUrl}}/practice" style="color: #dc2626; text-decoration: none; font-size: 14px; margin: 0 12px; font-weight: 600;">Practice Tests</a>
              </div>

              <!-- Deadline Countdown -->
              <div style="text-align: center; margin-top: 32px; padding: 20px; background: #fef2f2; border-radius: 8px; border: 1px solid #fecaca;">
                <h4 style="margin: 0 0 8px 0; color: #dc2626; font-size: 14px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px;">Deadline Countdown</h4>
                <div style="font-size: 36px; font-weight: 900; color: #dc2626; margin: 8px 0;">
                  {{#if (eq daysRemaining 0)}}
                  TODAY
                  {{else}}
                  {{daysRemaining}}
                  {{/if}}
                </div>
                <div style="font-size: 14px; color: #991b1b; font-weight: 600;">
                  {{#if (eq daysRemaining 0)}}
                  Goal deadline is today!
                  {{else if (eq daysRemaining 1)}}
                  Day remaining
                  {{else}}
                  Days remaining
                  {{/if}}
                </div>
              </div>

            </td>
          </tr>

          <!-- Footer -->
          <tr>
            <td class="email-footer" style="background: #f9fafb; padding: 32px 24px; text-align: center; border: 1px solid #e5e7eb; border-top: none; border-radius: 0 0 12px 12px;">
              <p class="footer-text" style="font-size: 14px; color: #6b7280; margin: 0 0 16px 0;">
                You're receiving this deadline alert because you have goal notifications enabled.
              </p>

              <div class="footer-links" style="margin: 16px 0;">
                <a href="{{dashboardUrl}}/settings" class="footer-link" style="color: #4f46e5; text-decoration: none; font-size: 14px; margin: 0 12px; font-weight: 500;">Notification Settings</a>
                <a href="mailto:{{supportEmail}}" class="footer-link" style="color: #4f46e5; text-decoration: none; font-size: 14px; margin: 0 12px; font-weight: 500;">Support</a>
                <a href="{{unsubscribeUrl}}" class="footer-link" style="color: #6b7280; text-decoration: none; font-size: 14px; margin: 0 12px; font-weight: 500;">Unsubscribe</a>
              </div>

              <p style="font-size: 12px; color: #9ca3af; margin: 16px 0 0 0;">
                ¬© {{currentYear}} Mellowise. All rights reserved.<br>
                Helping you achieve your exam goals.
              </p>
            </td>
          </tr>

        </table>
      </td>
    </tr>
  </table>

  <!-- Tracking Pixel -->
  {{trackingPixel}}

  <!-- Preheader Text -->
  <div style="display: none; font-size: 1px; color: #f9fafb; line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;">
    {{goalTitle}} deadline alert: {{daysRemaining}} days remaining. {{progressPercentage}}% progress to target.
  </div>
</body>
</html>